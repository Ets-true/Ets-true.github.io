<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Department</title>

    <link rel="stylesheet" type="text/css" href="css/fonts.css"/>
    <link rel="stylesheet" type="text/css" href="css/reset.css"/>
    <link rel="stylesheet" type="text/css" href="css/main.css"/>
    <!-- <link rel="stylesheet" type="text/css" href="css/examples.css"/> -->

</head>
<body>
    <header>
        <div class="menu">
        </div>
        <div class="logo">
            <div class="logo_top">department</div>
            <div class="logo_bottom">разработка сайтов</div>
        </div>
    </header>

    <div class="main">

        <div class="section Jobs">
            <div class="content_wrap">
                <div class="quote">
                    <span class="black left">Every proble<span class="white">m has <span class="bold">a solution.</span> </span> </span>
                    <span class="white">The only difficu<span class="black">lty is to <span class="bold">find</span> it </span> </span>
                </div>
                <div class="iphone">
                    <img src="media/iphone.png" alt="">
                </div>
            </div>
            
        </div>

        <div class="section chapter">
            <span class="chapter__title">То, что заметят</span>
        </div>

        <div class="lottie_wrap">
            <div id="lottie-1" class="lottie_animation"></div>
        </div>


        <div id="pinContainer">
            <div class="slider__title">
                Делаем для
            </div>
            <div class="slider__arc">
                <img src="media/arc.png" alt="">
            </div>

            <div class="slide__title">
                <video class="title__video" id="IT__title"  width="100%" height="50%" no-controls autoplay loop muted >
                    <source src="IT_title.mp4" type='video/mp4' />
                </video>
            </div>
            <div class="slide__title">
                <video class="title__video" id="Art__title"  width="100%" height="50%" no-controls autoplay loop muted >
                    <source src="Art_title.mp4" type='video/mp4' />
                </video>
            </div>
            <div class="slide__title">
                <video class="title__video" id="Industry__title"  width="100%" height="50%" no-controls autoplay loop muted >
                    <source src="Industry__title.mp4" type='video/mp4' />
                </video>
            </div>
                
                

            <div id="slideContainer">
                
                <section class="panel color-blue">
                   <div class="slider__video video__up">
                        <video id="video_background" class="video__IT"  width="100%" height="50%" no-controls autoplay loop muted >
                            <source src="IT.mp4" type='video/mp4' />
                        </video>
                    </div> 
                </section>
                <section class="panel color-red">
                    <div class="slider__video">
                        <video id="video_background" width="100%" height="50%" no-controls autoplay loop muted >
                            <source src="Art.mp4" type='video/mp4' />
                        </video>
                    </div>
                </section>
                <section class="panel color-green">
                    <div class="slider__video">
                        <video id="video_background" width="100%" height="50%" no-controls autoplay loop muted >
                            <source src="Industry.mp4" type='video/mp4' />
                        </video>
                    </div>
                </section>
                <section class="panel color-purp">
                    <div class="slider__video">
                        <video id="video_background" width="100%" height="50%" no-controls autoplay loop muted >
                            <source src="Industry.mp4" type='video/mp4' />
                        </video>
                    </div>
                </section>
                <section class="panel color-purp">
                    <div class="slider__video">
                        <video id="video_background" width="100%" height="50%" no-controls autoplay loop muted >
                            <source src="video1.mp4" type='video/mp4' />
                        </video>
                    </div>
                </section>
            </div>
        </div>
        

        <div class="mouse">
            <div class="mouse__line"></div>
            <div class="mouse__body"></div>
        </div>

       


    </div>

    <!-- <div class="next__wrap"></div> -->

    

    
    

    <script src="js/jquery.min.js"> </script>
    <script src="js/main.js"> </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.5.0/lottie.js'></script>

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.0.1/TweenLite.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.0.1/TimelineMax.min.js"></script>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/animation.gsap.min.js"></script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/debug.addIndicators.min.js"></script>


	<script type="text/javascript" src="js/highlight.pack.js"></script>
	<script type="text/javascript" src="js/modernizr.custom.min.js"></script>
    
	<script type="text/javascript" src="js/examples.js"></script>
	
	<script type="text/javascript" src="js/gsap3/gsap.min.js"></script>

	<script type="text/javascript" src="js/ScrollMagic.js"></script>
	<script type="text/javascript" src="js/animation.gsap.js"></script>
	<!-- <script type="text/javascript" src="js/debug.addIndicators.js"></script> -->



    <script>
        $(function () { // wait for document ready
            // init
            var controller = new ScrollMagic.Controller();
    
            // define movement of panels
            var wipeAnimation = new TimelineMax() 
                // animate to second panel
                // .to("#slideContainer", 0.5, {z: -150})		// move back in 3D space
                .to("#slideContainer", 1,   {x: "-20%"})	// move in to first panel
                // .to("#slideContainer", 0.5, {z: 0})				// move back to origin in 3D space
                // animate to third panel
                // .to("#slideContainer", 0.5, {z: -150, delay: 1})
                .to("#slideContainer", 1,   {x: "-40%"})
                // .to("#slideContainer", 0.5, {z: 0})
                // animate to forth panel
                // .to("#slideContainer", 0.5, {z: -150, delay: 1})
                .to("#slideContainer", 1,   {x: "-60%"})
                // .to("#slideContainer", 0.5, {z: 0});
                .to("#slideContainer", 1,   {x: "-80%"})
            
    
            // create scene to pin and link animation
            new ScrollMagic.Scene({
                    triggerElement: "#pinContainer",
                    triggerHook: "onLeave",
                    duration: "500%"
                })
                .setPin("#pinContainer")
                .setTween(wipeAnimation)
                .addIndicators() // add indicators (requires plugin)
                .addTo(controller);

            // var IT = document.querySelector('.test');
            // IT.pause();


           
        });


       
    </script>


<script>
        
    $(document).ready(function(){

        var video = document.querySelector('.video__IT')
        video.load();
        video.pause();
        
         setTimeout(function(){
            $('.iphone').addClass('active')
        }, 100);
        setTimeout(function(){
            $('.quote').addClass('active')
        }, 500);
        
    });


    var animData = {
        container: document.getElementById('lottie-1'),
        renderer: 'svg',
        loop: true,
        autoplay: false,
        path: 'lottie.json'
    };
    var anim = bodymovin.loadAnimation(animData);

        


    var lottie_Wrap = $(".lottie_wrap");
    var lottie_Wrap_Height = $(".lottie_wrap").height();
    var lottie_Wrap_Position = $(".lottie_wrap").offset().top;

    var animDuration = lottie_Wrap_Height;

   
    var lottie_Animation_Height = $('.lottie_animation').height();
    var lottie_Animation_Height_2 = lottie_Animation_Height/2;


    // var window = $(window);
    var winHeight = $(window).height();

    var scrollToElem = (lottie_Wrap_Position + lottie_Animation_Height_2) - winHeight;
    // var scrollToElem = 1500;
   
    

    
    function animatebodymovin(duration, animObject) {
        
       
        var winScrollTop = $(this).scrollTop();
        var scrollPosition = winScrollTop - scrollToElem;
        


        if(scrollPosition >= 0){
            var maxFrames = animObject.totalFrames;
            var frame = (maxFrames / 100) * (scrollPosition / (duration / 100));
            animObject.goToAndStop(frame, true);
        }
        

    }

    

    $(window).scroll(function(){
        var winScrollTop = $(this).scrollTop();

        if(winScrollTop > scrollToElem) {
            animatebodymovin(animDuration, anim);
        }

    });

    
</script>
</body>
</html>